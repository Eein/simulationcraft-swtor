// ==========================================================================
// SimulationCraft for Star Wars: The Old Republic
// http://code.google.com/p/simulationcraft-swtor/
// ==========================================================================

#include "simulationcraft.hpp"

// ==========================================================================
// Rating
// ==========================================================================

namespace { // ANONYMOUS ====================================================

// Source: http://sithwarrior.com/forums/Thread-SWTOR-formula-list?pid=8298#pid8298
// Which he supposedly datamined with Nodeviewer.
const int base_health_table[] = {
  /*  0 */    1,
  /*  1 */  130,
  /*  2 */  140,
  /*  3 */  150,
  /*  4 */  160,
  /*  5 */  170,
  /*  6 */  185,
  /*  7 */  200,
  /*  8 */  220,
  /*  9 */  240,
  /* 10 */  260,
  /* 11 */  285,
  /* 12 */  310,
  /* 13 */  335,
  /* 14 */  365,
  /* 15 */  395,
  /* 16 */  430,
  /* 17 */  465,
  /* 18 */  500,
  /* 19 */  540,
  /* 20 */  580,
  /* 21 */  620,
  /* 22 */  665,
  /* 23 */  710,
  /* 24 */  755,
  /* 25 */  805,
  /* 26 */  855,
  /* 27 */  905,
  /* 28 */  960,
  /* 29 */ 1015,
  /* 30 */ 1070,
  /* 31 */ 1125,
  /* 32 */ 1185,
  /* 33 */ 1245,
  /* 34 */ 1305,
  /* 35 */ 1370,
  /* 36 */ 1435,
  /* 37 */ 1500,
  /* 38 */ 1570,
  /* 39 */ 1640,
  /* 40 */ 1710,
  /* 41 */ 1780,
  /* 42 */ 1855,
  /* 43 */ 1930,
  /* 44 */ 2005,
  /* 45 */ 2085,
  /* 46 */ 2165,
  /* 47 */ 2245,
  /* 48 */ 2330,
  /* 49 */ 2415,
  /* 50 */ 2500,
};

struct standard_health_t
{ int damage, healing; };

// Source: http://sithwarrior.com/forums/Thread-SWTOR-formula-list?pid=3547#pid3547
const standard_health_t standard_health_table[] = {
  /*  0 */ {    1,    1 },
  /*  1 */ {  180,  375 },
  /*  2 */ {  210,  430 },
  /*  3 */ {  240,  505 },
  /*  4 */ {  270,  585 },
  /*  5 */ {  305,  675 },
  /*  6 */ {  340,  770 },
  /*  7 */ {  380,  880 },
  /*  8 */ {  420, 1000 },
  /*  9 */ {  465, 1140 },
  /* 10 */ {  500, 1290 },
  /* 11 */ {  540, 1405 },
  /* 12 */ {  580, 1535 },
  /* 13 */ {  620, 1665 },
  /* 14 */ {  655, 1790 },
  /* 15 */ {  690, 1915 },
  /* 16 */ {  720, 2060 },
  /* 17 */ {  725, 2150 },
  /* 18 */ {  750, 2285 },
  /* 19 */ {  780, 2435 },
  /* 20 */ {  790, 2560 },
  /* 21 */ {  830, 2680 },
  /* 22 */ {  870, 2795 },
  /* 23 */ {  910, 2915 },
  /* 24 */ {  945, 3040 },
  /* 25 */ {  960, 3105 },
  /* 26 */ {  975, 3205 },
  /* 27 */ { 1005, 3300 },
  /* 28 */ { 1050, 3425 },
  /* 29 */ { 1085, 3535 },
  /* 30 */ { 1130, 3670 },
  /* 31 */ { 1175, 3915 },
  /* 32 */ { 1215, 4165 },
  /* 33 */ { 1220, 4355 },
  /* 34 */ { 1255, 4590 },
  /* 35 */ { 1280, 4830 },
  /* 36 */ { 1305, 5055 },
  /* 37 */ { 1320, 5265 },
  /* 38 */ { 1335, 5530 },
  /* 39 */ { 1350, 5715 },
  /* 40 */ { 1380, 5945 },
  /* 41 */ { 1400, 6080 },
  /* 42 */ { 1430, 6225 },
  /* 43 */ { 1440, 6320 },
  /* 44 */ { 1480, 6485 },
  /* 45 */ { 1490, 6565 },
  /* 46 */ { 1540, 6735 },
  /* 47 */ { 1545, 6785 },
  /* 48 */ { 1560, 6920 },
  /* 49 */ { 1575, 6970 },
  /* 50 */ { 1610, 7085 },
  /* 51 */ { 1850, 7820 },
  /* 52 */ { 2140, 8780 },
  /* 53 */ { 2350, 9605 },
  /* 54 */ { 2535, 10440 },
  /* 55 */ { 2685, 11180 },
};

template <typename T, std::size_t N>
const T& get_table( const T (&table)[N], unsigned int index )
{
  if ( index >= N )
    index = 0;
  return table[ index ];
}

const standard_health_t& get_standard_health( int level )
{ return get_table( standard_health_table, level ); }
} // ANONYMOUS namespace ====================================================

// rating_t::standardhealth_damage ==========================================

double rating_t::standardhealth_damage( int level )
{ return get_standard_health( level ).damage; }

// rating_t::standardhealth_healing =========================================

double rating_t::standardhealth_healing( int level )
{ return get_standard_health( level ).healing; }

// rating_t::get_base_health ================================================

int rating_t::get_base_health( int level )
{ return get_table( base_health_table, level ); }
